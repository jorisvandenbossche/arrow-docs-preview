

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filesystem Interface &#8212; Apache Arrow v3.0.0.dev94+g959e8c558.d20201103</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c78d4f2b1f8277c2fa0830b4506d5cfe.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.8636327e669f6dcffc22.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Filesystem Interface (legacy)" href="filesystems_deprecated.html" />
    <link rel="prev" title="Streaming, Serialization, and IPC" href="ipc.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../index.html">
    
      <img src="../_static/arrow.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../spec.html">Specifications and Protocols</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../libraries.html">Libraries</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../developers.html">Development</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
          
            
                <li class="">
                    <a href="../status.html">Implementation Status</a>
                </li>
            
          
            
                <li class="">
                    <a href="https://arrow.apache.org/docs/c_glib/">C/GLib</a>
                </li>
            
          
            
                <li class="">
                    <a href="../cpp/index.html">C++</a>
                </li>
            
          
            
                <li class="">
                    <a href="https://github.com/apache/arrow/blob/master/csharp/README.md">C#</a>
                </li>
            
          
            
                <li class="">
                    <a href="https://godoc.org/github.com/apache/arrow/go/arrow">Go</a>
                </li>
            
          
            
                <li class="">
                    <a href="../java/index.html">Java</a>
                </li>
            
          
            
                <li class="">
                    <a href="https://arrow.apache.org/docs/js/">JavaScript</a>
                </li>
            
          
            
                <li class="">
                    <a href="https://github.com/apache/arrow/blob/master/matlab/README.md">MATLAB</a>
                </li>
            
          
            
  
                <li class="active">
                    <a href="index.html">Python</a>
                    <ul>
                    
                        <li class="">
                            <a href="install.html">Installing PyArrow</a>
                        </li>
                    
                        <li class="">
                            <a href="memory.html">Memory and IO Interfaces</a>
                        </li>
                    
                        <li class="">
                            <a href="data.html">Data Types and In-Memory Data Model</a>
                        </li>
                    
                        <li class="">
                            <a href="compute.html">Compute Functions</a>
                        </li>
                    
                        <li class="">
                            <a href="ipc.html">Streaming, Serialization, and IPC</a>
                        </li>
                    
                        <li class="active">
                            <a href="">Filesystem Interface</a>
                        </li>
                    
                        <li class="">
                            <a href="filesystems_deprecated.html">Filesystem Interface (legacy)</a>
                        </li>
                    
                        <li class="">
                            <a href="plasma.html">The Plasma In-Memory Object Store</a>
                        </li>
                    
                        <li class="">
                            <a href="numpy.html">NumPy Integration</a>
                        </li>
                    
                        <li class="">
                            <a href="pandas.html">Pandas Integration</a>
                        </li>
                    
                        <li class="">
                            <a href="timestamps.html">Timestamps</a>
                        </li>
                    
                        <li class="">
                            <a href="csv.html">Reading CSV files</a>
                        </li>
                    
                        <li class="">
                            <a href="feather.html">Feather File Format</a>
                        </li>
                    
                        <li class="">
                            <a href="json.html">Reading JSON files</a>
                        </li>
                    
                        <li class="">
                            <a href="parquet.html">Reading and Writing the Apache Parquet Format</a>
                        </li>
                    
                        <li class="">
                            <a href="dataset.html">Tabular Datasets</a>
                        </li>
                    
                        <li class="">
                            <a href="cuda.html">CUDA Integration</a>
                        </li>
                    
                        <li class="">
                            <a href="extending_types.html">Extending pyarrow</a>
                        </li>
                    
                        <li class="">
                            <a href="extending.html">Using pyarrow from C++ and Cython Code</a>
                        </li>
                    
                        <li class="">
                            <a href="api.html">API Reference</a>
                        </li>
                    
                        <li class="">
                            <a href="getting_involved.html">Getting Involved</a>
                        </li>
                    
                        <li class="">
                            <a href="benchmarks.html">Benchmarks</a>
                        </li>
                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="https://arrow.apache.org/docs/r/">R</a>
                </li>
            
          
            
                <li class="">
                    <a href="https://github.com/apache/arrow/blob/master/ruby/README.md">Ruby</a>
                </li>
            
          
            
                <li class="">
                    <a href="https://docs.rs/crate/arrow/">Rust</a>
                </li>
            
          
        
        
        
        
      </ul>
  
  </nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#usage" class="nav-link">Usage</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#reading-and-writing-files" class="nav-link">Reading and writing files</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#listing-files" class="nav-link">Listing files</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#s3" class="nav-link">S3</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#hadoop-file-system-hdfs" class="nav-link">Hadoop File System (HDFS)</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#using-fsspec-compatible-filesystems" class="nav-link">Using fsspec-compatible filesystems</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="filesystem-interface">
<span id="filesystem"></span><h1>Filesystem Interface<a class="headerlink" href="#filesystem-interface" title="Permalink to this headline">¶</a></h1>
<p>PyArrow comes with an abstract filesystem interface, as well as concrete
implementations for various storage types.</p>
<p>The filesystem interface provides input and output streams as well as
directory operations.  A simplified view of the underlying data
storage is exposed.  Data paths are represented as <em>abstract paths</em>, which
are <code class="docutils literal notranslate"><span class="pre">/</span></code>-separated, even on Windows, and shouldn’t include special path
components such as <code class="docutils literal notranslate"><span class="pre">.</span></code> and <code class="docutils literal notranslate"><span class="pre">..</span></code>.  Symbolic links, if supported by the
underlying storage, are automatically dereferenced.  Only basic
<a class="reference internal" href="generated/pyarrow.fs.FileInfo.html#pyarrow.fs.FileInfo" title="pyarrow.fs.FileInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">metadata</span></code></a> about file entries, such as the file size
and modification time, is made available.</p>
<p>The core interface is represented by the base class <a class="reference internal" href="generated/pyarrow.fs.FileSystem.html#pyarrow.fs.FileSystem" title="pyarrow.fs.FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileSystem</span></code></a>.
Concrete subclasses are available for various kinds of storage, such as local
filesystem access (<a class="reference internal" href="generated/pyarrow.fs.LocalFileSystem.html#pyarrow.fs.LocalFileSystem" title="pyarrow.fs.LocalFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalFileSystem</span></code></a>), HDFS (<code class="xref py py-class docutils literal notranslate"><span class="pre">HadoopFileSystem</span></code>)
and Amazon S3-compatible storage (<a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem" title="pyarrow.fs.S3FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3FileSystem</span></code></a>).</p>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>A FileSystem object can be created with one of the constructors (and check the
respective constructor for its options):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyarrow</span> <span class="k">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">LocalFileSystem</span><span class="p">()</span>
</pre></div>
</div>
<p>or alternatively inferred from a URI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">FileSystem</span><span class="o">.</span><span class="n">from_uri</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span>
<span class="go">&lt;pyarrow._s3fs.S3FileSystem at 0x7f6760cbf4f0&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">path</span>
<span class="go">&#39;my-bucket&#39;</span>
</pre></div>
</div>
<div class="section" id="reading-and-writing-files">
<h3>Reading and writing files<a class="headerlink" href="#reading-and-writing-files" title="Permalink to this headline">¶</a></h3>
<p>Several of the IO-related functions in PyArrow accept either a URI (and infer
the filesystem) or an explicit <code class="docutils literal notranslate"><span class="pre">filesystem</span></code> argument to specify the filesystem
to read or write from. For example, the <a class="reference internal" href="generated/pyarrow.parquet.read_table.html#pyarrow.parquet.read_table" title="pyarrow.parquet.read_table"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyarrow.parquet.read_table()</span></code></a>
function can be used in the following ways:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># using a URI -&gt; filesystem is inferred</span>
<span class="n">pq</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s2">&quot;s3://my-bucket/data.parquet&quot;</span><span class="p">)</span>
<span class="c1"># using a path and filesystem</span>
<span class="n">s3</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="p">(</span><span class="o">..</span><span class="p">)</span>
<span class="n">pq</span><span class="o">.</span><span class="n">read_table</span><span class="p">(</span><span class="s2">&quot;my-bucket/data.parquet&quot;</span><span class="p">,</span> <span class="n">filesystem</span><span class="o">=</span><span class="n">s3</span><span class="p">)</span>
</pre></div>
</div>
<p>The filesystem interface further allows to open files for reading (input) or
writing (output) directly, which can be combined with functions that work with
file-like objects. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">LocalFileSystem</span><span class="p">()</span>

<span class="k">with</span> <span class="n">local</span><span class="o">.</span><span class="n">open_output_stream</span><span class="p">(</span><span class="s2">&quot;test.arrow&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
   <span class="k">with</span> <span class="n">pa</span><span class="o">.</span><span class="n">RecordBatchFileWriter</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">table</span><span class="o">.</span><span class="n">schema</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
      <span class="n">writer</span><span class="o">.</span><span class="n">write_table</span><span class="p">(</span><span class="n">table</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="listing-files">
<h3>Listing files<a class="headerlink" href="#listing-files" title="Permalink to this headline">¶</a></h3>
<p>Inspecting the directories and files on a filesystem can be done with the
<a class="reference internal" href="generated/pyarrow.fs.FileSystem.html#pyarrow.fs.FileSystem.get_file_info" title="pyarrow.fs.FileSystem.get_file_info"><code class="xref py py-meth docutils literal notranslate"><span class="pre">FileSystem.get_file_info()</span></code></a> method. To list the contents of a directory,
use the <a class="reference internal" href="generated/pyarrow.fs.FileSelector.html#pyarrow.fs.FileSelector" title="pyarrow.fs.FileSelector"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileSelector</span></code></a> object to specify the selection:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">local</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">FileSelector</span><span class="p">(</span><span class="s2">&quot;dataset/&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">[&lt;FileInfo for &#39;dataset/part=B&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;dataset/part=B/data0.parquet&#39;: type=FileType.File, size=1564&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;dataset/part=A&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;dataset/part=A/data0.parquet&#39;: type=FileType.File, size=1564&gt;]</span>
</pre></div>
</div>
<p>This returns a list of <a class="reference internal" href="generated/pyarrow.fs.FileInfo.html#pyarrow.fs.FileInfo" title="pyarrow.fs.FileInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileInfo</span></code></a> objects, containing information about
the type (file or directory), the size, the date last modified, etc.</p>
<p>You can also get this information for a single explicit path (or list of
paths):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">local</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="s1">&#39;test.arrow&#39;</span><span class="p">)</span>
<span class="go">&lt;FileInfo for &#39;test.arrow&#39;: type=FileType.File, size=3250&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">local</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="s1">&#39;non_existent&#39;</span><span class="p">)</span>
<span class="go">&lt;FileInfo for &#39;non_existent&#39;: type=FileType.NotFound&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s3">
<h2>S3<a class="headerlink" href="#s3" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="generated/pyarrow.fs.S3FileSystem.html#pyarrow.fs.S3FileSystem" title="pyarrow.fs.S3FileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">S3FileSystem</span></code></a> constructor has several options to configure the S3
connection (e.g. credentials, the region, an endpoint override, etc). In
addition, the constructor will also inspect configured S3 credentials as
supported by AWS (for example the <code class="docutils literal notranslate"><span class="pre">AWS_ACCESS_KEY_ID</span></code> and
<code class="docutils literal notranslate"><span class="pre">AWS_SECRET_ACCESS_KEY</span></code> environment variables).</p>
<p>Example how you can read contents from a S3 bucket:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyarrow</span> <span class="k">import</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span> <span class="o">=</span> <span class="n">fs</span><span class="o">.</span><span class="n">S3FileSystem</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="s1">&#39;eu-west-3&#39;</span><span class="p">)</span>

<span class="go"># List all contents in a bucket, recursively</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s3</span><span class="o">.</span><span class="n">get_file_info</span><span class="p">(</span><span class="n">fs</span><span class="o">.</span><span class="n">FileSelector</span><span class="p">(</span><span class="s1">&#39;my-test-bucket&#39;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="go">[&lt;FileInfo for &#39;my-test-bucket/File1&#39;: type=FileType.File, size=10&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/File5&#39;: type=FileType.File, size=10&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir1&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir2&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/EmptyDir&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir1/File2&#39;: type=FileType.File, size=11&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir1/Subdir&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir2/Subdir&#39;: type=FileType.Directory&gt;,</span>
<span class="go"> &lt;FileInfo for &#39;my-test-bucket/Dir2/Subdir/File3&#39;: type=FileType.File, size=10&gt;]</span>

<span class="go"># Open a file for reading and download its contents</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">s3</span><span class="o">.</span><span class="n">open_input_stream</span><span class="p">(</span><span class="s1">&#39;my-test-bucket/Dir1/File2&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">readall</span><span class="p">()</span>
<span class="go">b&#39;some data&#39;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>See the <a class="reference external" href="https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html">AWS docs</a>
for the different ways to configure the AWS credentials.</p>
</div>
</div>
<div class="section" id="hadoop-file-system-hdfs">
<h2>Hadoop File System (HDFS)<a class="headerlink" href="#hadoop-file-system-hdfs" title="Permalink to this headline">¶</a></h2>
<p>PyArrow comes with bindings to the Hadoop File System (based on C++ bindings
using <code class="docutils literal notranslate"><span class="pre">libhdfs</span></code>, a JNI-based interface to the Java Hadoop client). You connect
using the <code class="xref py py-class docutils literal notranslate"><span class="pre">HadoopFileSystem</span></code> constructor:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">code</span><span class="o">-</span><span class="n">block</span><span class="p">::</span> <span class="n">python</span>
</pre></div>
</div>
<blockquote>
<div><p>from pyarrow import fs
hdfs = fs.HadoopFileSystem(host, port, user=user, kerb_ticket=ticket_cache_path)</p>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">libhdfs</span></code> library is loaded <strong>at runtime</strong> (rather than at link / library
load time, since the library may not be in your LD_LIBRARY_PATH), and relies on
some environment variables.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">HADOOP_HOME</span></code>: the root of your installed Hadoop distribution. Often has
<cite>lib/native/libhdfs.so</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">JAVA_HOME</span></code>: the location of your Java SDK installation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ARROW_LIBHDFS_DIR</span></code> (optional): explicit location of <code class="docutils literal notranslate"><span class="pre">libhdfs.so</span></code> if it is
installed somewhere other than <code class="docutils literal notranslate"><span class="pre">$HADOOP_HOME/lib/native</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLASSPATH</span></code>: must contain the Hadoop jars. You can set these using:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">CLASSPATH</span><span class="o">=</span><span class="sb">`</span><span class="nv">$HADOOP_HOME</span>/bin/hdfs classpath --glob<span class="sb">`</span>
</pre></div>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">CLASSPATH</span></code> is not set, then it will be set automatically if the
<code class="docutils literal notranslate"><span class="pre">hadoop</span></code> executable is in your system path, or if <code class="docutils literal notranslate"><span class="pre">HADOOP_HOME</span></code> is set.</p>
</li>
</ul>
</div>
<div class="section" id="using-fsspec-compatible-filesystems">
<h2>Using fsspec-compatible filesystems<a class="headerlink" href="#using-fsspec-compatible-filesystems" title="Permalink to this headline">¶</a></h2>
<p>The filesystems mentioned above are natively supported by Arrow C++ / PyArrow.
The Python ecosystem, however, also has several filesystem packages. Those
packages following the
<a class="reference external" href="https://filesystem-spec.readthedocs.io/en/latest/">fsspec</a> interface can be
used in PyArrow as well.</p>
<p>Functions accepting a filesystem object will also accept an fsspec subclass.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># creating an fsspec-based filesystem object for Google Cloud Storage</span>
<span class="kn">import</span> <span class="nn">gcsfs</span>
<span class="n">fs</span> <span class="o">=</span> <span class="n">gcsfs</span><span class="o">.</span><span class="n">GCSFileSystem</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="s1">&#39;my-google-project&#39;</span><span class="p">)</span>

<span class="c1"># using this to read a partitioned dataset</span>
<span class="kn">import</span> <span class="nn">pyarrow.dataset</span> <span class="k">as</span> <span class="nn">ds</span>
<span class="n">ds</span><span class="o">.</span><span class="n">dataset</span><span class="p">(</span><span class="s2">&quot;data/&quot;</span><span class="p">,</span> <span class="n">filesystem</span><span class="o">=</span><span class="n">fs</span><span class="p">)</span>
</pre></div>
</div>
<p>Under the hood, the fsspec filesystem object is wrapped into a python-based
PyArrow filesystem (<a class="reference internal" href="generated/pyarrow.fs.PyFileSystem.html#pyarrow.fs.PyFileSystem" title="pyarrow.fs.PyFileSystem"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyFileSystem</span></code></a>) using <a class="reference internal" href="generated/pyarrow.fs.FSSpecHandler.html#pyarrow.fs.FSSpecHandler" title="pyarrow.fs.FSSpecHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">FSSpecHandler</span></code></a>.
You can also manually do this to get an object with the PyArrow FileSystem
interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyarrow.fs</span> <span class="k">import</span> <span class="n">PyFileSystem</span><span class="p">,</span> <span class="n">FSSpecHandler</span>
<span class="n">pa_fs</span> <span class="o">=</span> <span class="n">PyFileSystem</span><span class="p">(</span><span class="n">FSSpecHandler</span><span class="p">(</span><span class="n">fs</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="ipc.html" title="previous page">Streaming, Serialization, and IPC</a>
    <a class='right-next' id="next-link" href="filesystems_deprecated.html" title="next page">Filesystem Interface (legacy)</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.8636327e669f6dcffc22.js"></script>


    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-107500873-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-107500873-1');
</script>

  </body>
</html>