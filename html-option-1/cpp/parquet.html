
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading and writing Parquet files &#8212; Apache Arrow v3.0.0.dev641+ge8678380d</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.5d5914fd1cc083e2424bb9c5e974de8e.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.90951cbc93101d5860c0.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Reading CSV files" href="csv.html" />
    <link rel="prev" title="Reading and writing the Arrow IPC format" href="ipc.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">

    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="svg-toc" viewBox="0 0 24 24">
        <title>Contents</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z"/>
          <line x1="4" y1="6" x2="20" y2="6" />
          <line x1="10" y1="12" x2="20" y2="12" />
          <line x1="6" y1="18" x2="20" y2="18" />
        </svg>
      </symbol>
      <symbol id="svg-menu" viewBox="0 0 24 24">
        <title>Menu</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="feather feather-menu">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewBox="0 0 24 24">
        <title>Expand</title>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          class="feather feather-chevron-right">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
    </svg>
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">


    
      
      <a class="navbar-brand" href="../index.html">
        <img src="../_static/arrow.png" class="logo" alt="logo">
      </a>
      
    

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../format.html">
  Specifications and Protocols
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="../libraries.html">
  Libraries
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../developers.html">
  Development
 </a>
</li>

        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/apache/arrow" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/ApacheArrow" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <!-- <ul class="nav bd-sidenav"> -->
      <ul class="current nav bd-sidenav testest">
 <li class="toctree-l2">
  <a class="reference internal" href="../status.html">
   Implementation Status
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://arrow.apache.org/docs/c_glib/">
   C/GLib
  </a>
 </li>
 <li class="toctree-l2 current active has-children">
  <a class="reference internal" href="index.html">
   C++
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="icon">
    <svg>
     <use href="#svg-arrow-right">
     </use>
    </svg>
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l3 current active has-children">
    <a class="reference internal" href="getting_started.html">
     User Guide
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="icon">
      <svg>
       <use href="#svg-arrow-right">
       </use>
      </svg>
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l4">
      <a class="reference internal" href="overview.html">
       High-Level Overview
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="conventions.html">
       Conventions
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="cmake.html">
       Using Arrow C++ in your own project
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="memory.html">
       Memory Management
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="arrays.html">
       Arrays
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="datatypes.html">
       Data Types
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="tables.html">
       Tabular Data
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="compute.html">
       Compute Functions
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="io.html">
       Input / output and filesystems
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="ipc.html">
       Reading and writing the Arrow IPC format
      </a>
     </li>
     <li class="toctree-l4 current active current-page">
      <a class="current reference internal" href="#">
       Reading and writing Parquet files
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="csv.html">
       Reading CSV files
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="json.html">
       Reading JSON files
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="flight.html">
       Arrow Flight RPC
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l3 has-children">
    <a class="reference internal" href="examples/index.html">
     Examples
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
    <label for="toctree-checkbox-3">
     <i class="icon">
      <svg>
       <use href="#svg-arrow-right">
       </use>
      </svg>
     </i>
    </label>
    <ul>
     <li class="toctree-l4">
      <a class="reference internal" href="examples/cmake_minimal_build.html">
       Minimal build using CMake
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="examples/row_columnar_conversion.html">
       Row to columnar conversion
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="examples/tuple_range_conversion.html">
       std::tuple-like ranges to Arrow
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l3 has-children">
    <a class="reference internal" href="api.html">
     API Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="icon">
      <svg>
       <use href="#svg-arrow-right">
       </use>
      </svg>
     </i>
    </label>
    <ul>
     <li class="toctree-l4">
      <a class="reference internal" href="api/support.html">
       Programming Support
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/memory.html">
       Memory (management)
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/datatype.html">
       Data Types
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/array.html">
       Arrays
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/scalar.html">
       Scalars
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/builder.html">
       Array Builders
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/table.html">
       Two-dimensional Datasets
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/c_abi.html">
       C Interfaces
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/compute.html">
       Compute Functions
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/tensor.html">
       Tensors
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/utilities.html">
       Utilities
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/io.html">
       Input / output
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/ipc.html">
       Arrow IPC
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/formats.html">
       File Formats
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/cuda.html">
       CUDA support
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/flight.html">
       Arrow Flight RPC
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="api/filesystem.html">
       Filesystems
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://github.com/apache/arrow/blob/master/csharp/README.md">
   C#
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://godoc.org/github.com/apache/arrow/go/arrow">
   Go
  </a>
 </li>
 <li class="toctree-l2 has-children">
  <a class="reference internal" href="../java/index.html">
   Java
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="icon">
    <svg>
     <use href="#svg-arrow-right">
     </use>
    </svg>
   </i>
  </label>
  <ul>
   <li class="toctree-l3">
    <a class="reference internal" href="../java/vector.html">
     ValueVector
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../java/vector_schema_root.html">
     VectorSchemaRoot
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../java/ipc.html">
     Reading/Writing IPC formats
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference external" href="https://arrow.apache.org/docs/java/reference/">
     Reference (javadoc)
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://arrow.apache.org/docs/js/">
   JavaScript
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://github.com/apache/arrow/blob/master/julia/Arrow/README.md">
   Julia
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://github.com/apache/arrow/blob/master/matlab/README.md">
   MATLAB
  </a>
 </li>
 <li class="toctree-l2 has-children">
  <a class="reference internal" href="../python/index.html">
   Python
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="icon">
    <svg>
     <use href="#svg-arrow-right">
     </use>
    </svg>
   </i>
  </label>
  <ul>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/install.html">
     Installing PyArrow
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/memory.html">
     Memory and IO Interfaces
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/data.html">
     Data Types and In-Memory Data Model
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/compute.html">
     Compute Functions
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/ipc.html">
     Streaming, Serialization, and IPC
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/filesystems.html">
     Filesystem Interface
    </a>
   </li>
   <li class="toctree-l3 has-children">
    <a class="reference internal" href="../python/filesystems_deprecated.html">
     Filesystem Interface (legacy)
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="icon">
      <svg>
       <use href="#svg-arrow-right">
       </use>
      </svg>
     </i>
    </label>
    <ul>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.hdfs.connect.html">
       pyarrow.hdfs.connect
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.cat.html">
       pyarrow.HadoopFileSystem.cat
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.chmod.html">
       pyarrow.HadoopFileSystem.chmod
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.chown.html">
       pyarrow.HadoopFileSystem.chown
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.delete.html">
       pyarrow.HadoopFileSystem.delete
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.df.html">
       pyarrow.HadoopFileSystem.df
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.disk_usage.html">
       pyarrow.HadoopFileSystem.disk_usage
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.download.html">
       pyarrow.HadoopFileSystem.download
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.exists.html">
       pyarrow.HadoopFileSystem.exists
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.get_capacity.html">
       pyarrow.HadoopFileSystem.get_capacity
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.get_space_used.html">
       pyarrow.HadoopFileSystem.get_space_used
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.info.html">
       pyarrow.HadoopFileSystem.info
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.ls.html">
       pyarrow.HadoopFileSystem.ls
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.mkdir.html">
       pyarrow.HadoopFileSystem.mkdir
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.open.html">
       pyarrow.HadoopFileSystem.open
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.rename.html">
       pyarrow.HadoopFileSystem.rename
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.rm.html">
       pyarrow.HadoopFileSystem.rm
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HadoopFileSystem.upload.html">
       pyarrow.HadoopFileSystem.upload
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/generated/pyarrow.HdfsFile.html">
       pyarrow.HdfsFile
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/plasma.html">
     The Plasma In-Memory Object Store
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/numpy.html">
     NumPy Integration
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/pandas.html">
     Pandas Integration
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/timestamps.html">
     Timestamps
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/csv.html">
     Reading CSV files
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/feather.html">
     Feather File Format
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/json.html">
     Reading JSON files
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/parquet.html">
     Reading and Writing the Apache Parquet Format
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/dataset.html">
     Tabular Datasets
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/cuda.html">
     CUDA Integration
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/extending_types.html">
     Extending pyarrow
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/extending.html">
     Using pyarrow from C++ and Cython Code
    </a>
   </li>
   <li class="toctree-l3 has-children">
    <a class="reference internal" href="../python/api.html">
     API Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="icon">
      <svg>
       <use href="#svg-arrow-right">
       </use>
      </svg>
     </i>
    </label>
    <ul>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/datatypes.html">
       Data Types and Schemas
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/arrays.html">
       Arrays and Scalars
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/memory.html">
       Buffers and Memory
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/compute.html">
       Compute Functions
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/files.html">
       Streams and File Access
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/tables.html">
       Tables and Tensors
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/ipc.html">
       Serialization and IPC
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/flight.html">
       Arrow Flight
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/formats.html">
       Tabular File Formats
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/filesystems.html">
       Filesystems
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/dataset.html">
       Dataset
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/plasma.html">
       Plasma In-Memory Object Store
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/cuda.html">
       CUDA Integration
      </a>
     </li>
     <li class="toctree-l4">
      <a class="reference internal" href="../python/api/misc.html">
       Miscellaneous
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/getting_involved.html">
     Getting Involved
    </a>
   </li>
   <li class="toctree-l3">
    <a class="reference internal" href="../python/benchmarks.html">
     Benchmarks
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://arrow.apache.org/docs/r/">
   R
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://github.com/apache/arrow/blob/master/ruby/README.md">
   Ruby
  </a>
 </li>
 <li class="toctree-l2">
  <a class="reference external" href="https://docs.rs/crate/arrow/">
   Rust
  </a>
 </li>
</ul>
    <!-- </ul> -->
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#supported-parquet-features">
   Supported Parquet features
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#page-types">
     Page types
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compression">
     Compression
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#encodings">
     Encodings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#types">
     Types
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#physical-types">
       Physical types
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#logical-types">
       Logical types
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#converted-types">
       Converted types
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#special-cases">
       Special cases
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#roundtripping-arrow-types">
       Roundtripping Arrow types
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#serialization-details">
         Serialization details
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#limitations">
       Limitations
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#encryption">
     Encryption
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#reading-parquet-files">
   Reading Parquet files
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#filereader">
     FileReader
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#streamreader">
     StreamReader
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#writing-parquet-files">
   Writing Parquet files
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#writetable">
     WriteTable
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#streamwriter">
     StreamWriter
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="reading-and-writing-parquet-files">
<h1>Reading and writing Parquet files<a class="headerlink" href="#reading-and-writing-parquet-files" title="Permalink to this headline">¶</a></h1>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="api/formats.html#cpp-api-parquet"><span class="std std-ref">Parquet reader and writer API reference</span></a>.</p>
</div>
<div class="sidebar">
<p class="sidebar-title">Contents</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#supported-parquet-features" id="id1">Supported Parquet features</a></p>
<ul>
<li><p><a class="reference internal" href="#page-types" id="id2">Page types</a></p></li>
<li><p><a class="reference internal" href="#compression" id="id3">Compression</a></p></li>
<li><p><a class="reference internal" href="#encodings" id="id4">Encodings</a></p></li>
<li><p><a class="reference internal" href="#types" id="id5">Types</a></p>
<ul>
<li><p><a class="reference internal" href="#physical-types" id="id6">Physical types</a></p></li>
<li><p><a class="reference internal" href="#logical-types" id="id7">Logical types</a></p></li>
<li><p><a class="reference internal" href="#converted-types" id="id8">Converted types</a></p></li>
<li><p><a class="reference internal" href="#special-cases" id="id9">Special cases</a></p></li>
<li><p><a class="reference internal" href="#roundtripping-arrow-types" id="id10">Roundtripping Arrow types</a></p>
<ul>
<li><p><a class="reference internal" href="#serialization-details" id="id11">Serialization details</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#limitations" id="id12">Limitations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#encryption" id="id13">Encryption</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#reading-parquet-files" id="id14">Reading Parquet files</a></p>
<ul>
<li><p><a class="reference internal" href="#filereader" id="id15">FileReader</a></p></li>
<li><p><a class="reference internal" href="#streamreader" id="id16">StreamReader</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#writing-parquet-files" id="id17">Writing Parquet files</a></p>
<ul>
<li><p><a class="reference internal" href="#writetable" id="id18">WriteTable</a></p></li>
<li><p><a class="reference internal" href="#streamwriter" id="id19">StreamWriter</a></p></li>
</ul>
</li>
</ul>
</div>
</div>
<p>The <a class="reference external" href="https://parquet.apache.org/documentation/latest/">Parquet format</a>
is a space-efficient columnar storage format for complex data.  The Parquet
C++ implementation is part of the Apache Arrow project and benefits
from tight integration with the Arrow C++ classes and facilities.</p>
<div class="section" id="supported-parquet-features">
<h2><a class="toc-backref" href="#id1">Supported Parquet features</a><a class="headerlink" href="#supported-parquet-features" title="Permalink to this headline">¶</a></h2>
<p>The Parquet format has many features, and Parquet C++ supports a subset of them.</p>
<div class="section" id="page-types">
<h3><a class="toc-backref" href="#id2">Page types</a><a class="headerlink" href="#page-types" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Page type</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DATA_PAGE</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>DATA_PAGE_V2</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>DICTIONARY_PAGE</p></td>
<td></td>
</tr>
</tbody>
</table>
<p><em>Unsupported page type:</em> INDEX_PAGE. When reading a Parquet file, pages of
this type are ignored.</p>
</div>
<div class="section" id="compression">
<h3><a class="toc-backref" href="#id3">Compression</a><a class="headerlink" href="#compression" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 68%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Compression codec</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SNAPPY</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>GZIP</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>BROTLI</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LZ4</p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-even"><td><p>ZSTD</p></td>
<td></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>(1) On the read side, Parquet C++ is able to decompress both the regular
LZ4 block format and the ad-hoc Hadoop LZ4 format used by the
<a class="reference external" href="https://github.com/apache/parquet-mr">reference Parquet implementation</a>.
On the write side, Parquet C++ always generates the ad-hoc Hadoop LZ4 format.</p></li>
</ul>
<p><em>Unsupported compression codec:</em> LZO.</p>
</div>
<div class="section" id="encodings">
<h3><a class="toc-backref" href="#id4">Encodings</a><a class="headerlink" href="#encodings" title="Permalink to this headline">¶</a></h3>
<table class="table">
<colgroup>
<col style="width: 74%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Encoding</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PLAIN</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>PLAIN_DICTIONARY</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>BIT_PACKED</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RLE</p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-even"><td><p>RLE_DICTIONARY</p></td>
<td><p>(2)</p></td>
</tr>
<tr class="row-odd"><td><p>BYTE_STREAM_SPLIT</p></td>
<td></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>(1) Only supported for encoding definition and repetition levels, not values.</p></li>
<li><p>(2) On the write path, RLE_DICTIONARY is only enabled if Parquet format version
2.0 (or potentially greater) is selected in <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">WriterProperties::version()</span></code>.</p></li>
</ul>
<p><em>Unsupported encodings:</em> DELTA_BINARY_PACKED, DELTA_LENGTH_BYTE_ARRAY,
DELTA_BYTE_ARRAY.</p>
</div>
<div class="section" id="types">
<h3><a class="toc-backref" href="#id5">Types</a><a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h3>
<div class="section" id="physical-types">
<h4><a class="toc-backref" href="#id6">Physical types</a><a class="headerlink" href="#physical-types" title="Permalink to this headline">¶</a></h4>
<table class="table">
<colgroup>
<col style="width: 41%" />
<col style="width: 40%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Physical type</p></th>
<th class="head"><p>Mapped Arrow type</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>BOOLEAN</p></td>
<td><p>Boolean</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>INT32</p></td>
<td><p>Int32 / other</p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-even"><td><p>INT64</p></td>
<td><p>Int64 / other</p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-odd"><td><p>INT96</p></td>
<td><p>Timestamp (nanoseconds)</p></td>
<td><p>(2)</p></td>
</tr>
<tr class="row-even"><td><p>FLOAT</p></td>
<td><p>Float32</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>DOUBLE</p></td>
<td><p>Float64</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>BYTE_ARRAY</p></td>
<td><p>Binary / other</p></td>
<td><p>(1) (3)</p></td>
</tr>
<tr class="row-odd"><td><p>FIXED_LENGTH_BYTE_ARRAY</p></td>
<td><p>FixedSizeBinary / other</p></td>
<td><p>(1)</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>(1) Can be mapped to other Arrow types, depending on the logical type
(see below).</p></li>
<li><p>(2) On the write side, <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ArrowWriterProperties::support_deprecated_int96_timestamps()</span></code>
must be enabled.</p></li>
<li><p>(3) On the write side, an Arrow LargeBinary can also mapped to BYTE_ARRAY.</p></li>
</ul>
</div>
<div class="section" id="logical-types">
<h4><a class="toc-backref" href="#id7">Logical types</a><a class="headerlink" href="#logical-types" title="Permalink to this headline">¶</a></h4>
<p>Specific logical types can override the default Arrow type mapping for a given
physical type.</p>
<table class="table">
<colgroup>
<col style="width: 22%" />
<col style="width: 34%" />
<col style="width: 33%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Logical type</p></th>
<th class="head"><p>Physical type</p></th>
<th class="head"><p>Mapped Arrow type</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NULL</p></td>
<td><p>Any</p></td>
<td><p>Null</p></td>
<td><p>(1)</p></td>
</tr>
<tr class="row-odd"><td><p>INT</p></td>
<td><p>INT32</p></td>
<td><p>Int8 / UInt8 / Int16 /
UInt16 / Int32 / UInt32</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>INT</p></td>
<td><p>INT64</p></td>
<td><p>Int64 / UInt64</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>DECIMAL</p></td>
<td><p>INT32 / INT64 / BYTE_ARRAY
/ FIXED_LENGTH_BYTE_ARRAY</p></td>
<td><p>Decimal128 / Decimal256</p></td>
<td><p>(2)</p></td>
</tr>
<tr class="row-even"><td><p>DATE</p></td>
<td><p>INT32</p></td>
<td><p>Date32</p></td>
<td><p>(3)</p></td>
</tr>
<tr class="row-odd"><td><p>TIME</p></td>
<td><p>INT32</p></td>
<td><p>Time32 (milliseconds)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>TIME</p></td>
<td><p>INT64</p></td>
<td><p>Time64 (micro- or
nanoseconds)</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TIMESTAMP</p></td>
<td><p>INT64</p></td>
<td><p>Timestamp (milli-, micro-
or nanoseconds)</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>STRING</p></td>
<td><p>BYTE_ARRAY</p></td>
<td><p>Utf8</p></td>
<td><p>(4)</p></td>
</tr>
<tr class="row-odd"><td><p>LIST</p></td>
<td><p>Any</p></td>
<td><p>List</p></td>
<td><p>(5)</p></td>
</tr>
<tr class="row-even"><td><p>MAP</p></td>
<td><p>Any</p></td>
<td><p>Map</p></td>
<td><p>(6)</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>(1) On the write side, the Parquet physical type INT32 is generated.</p></li>
<li><p>(2) On the write side, a FIXED_LENGTH_BYTE_ARRAY is always emitted.</p></li>
<li><p>(3) On the write side, an Arrow Date64 is also mapped to a Parquet DATE INT32.</p></li>
<li><p>(4) On the write side, an Arrow LargeUtf8 is also mapped to a Parquet STRING.</p></li>
<li><p>(5) On the write side, an Arrow LargeList or FixedSizedList is also mapped to
a Parquet LIST.</p></li>
<li><p>(6) On the read side, a key with multiple values does not get deduplicated,
in contradiction with the
<a class="reference external" href="https://github.com/apache/parquet-format/blob/master/LogicalTypes.md#maps">Parquet specification</a>.</p></li>
</ul>
<p><em>Unsupported logical types:</em> JSON, BSON, UUID.  If such a type is encountered
when reading a Parquet file, the default physical type mapping is used (for
example, a Parquet JSON column may be read as Arrow Binary or FixedSizeBinary).</p>
</div>
<div class="section" id="converted-types">
<h4><a class="toc-backref" href="#id8">Converted types</a><a class="headerlink" href="#converted-types" title="Permalink to this headline">¶</a></h4>
<p>While converted types are deprecated in the Parquet format (they are superceded
by logical types), they are recognized and emitted by the Parquet C++
implementation so as to maximize compatibility with other Parquet
implementations.</p>
</div>
<div class="section" id="special-cases">
<h4><a class="toc-backref" href="#id9">Special cases</a><a class="headerlink" href="#special-cases" title="Permalink to this headline">¶</a></h4>
<p>An Arrow Extension type is written out as its storage type.  It can still
be recreated at read time using Parquet metadata (see “Roundtripping Arrow
types” below).</p>
<p>An Arrow Dictionary type is written out as its value type.  It can still
be recreated at read time using Parquet metadata (see “Roundtripping Arrow
types” below).</p>
</div>
<div class="section" id="roundtripping-arrow-types">
<h4><a class="toc-backref" href="#id10">Roundtripping Arrow types</a><a class="headerlink" href="#roundtripping-arrow-types" title="Permalink to this headline">¶</a></h4>
<p>While there is no bijection between Arrow types and Parquet types, it is
possible to serialize the Arrow schema as part of the Parquet file metadata.
This is enabled using <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ArrowWriterProperties::store_schema()</span></code>.</p>
<p>On the read path, the serialized schema will be automatically recognized
and will recreate the original Arrow data, converting the Parquet data as
required (for example, a LargeList will be recreated from the Parquet LIST
type).</p>
<p>As an exemple, when serializing an Arrow LargeList to Parquet:</p>
<ul class="simple">
<li><p>The data is written out as a Parquet LIST</p></li>
<li><p>When read back, the Parquet LIST data is decoded as an Arrow LargeList if
<code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">ArrowWriterProperties::store_schema()</span></code> was enabled when writing the file;
otherwise, it is decoded as an Arrow List.</p></li>
</ul>
<div class="section" id="serialization-details">
<h5><a class="toc-backref" href="#id11">Serialization details</a><a class="headerlink" href="#serialization-details" title="Permalink to this headline">¶</a></h5>
<p>The Arrow schema is serialized as a <a class="reference internal" href="../format/Columnar.html#format-ipc"><span class="std std-ref">Arrow IPC</span></a> schema message,
then base64-encoded and stored under the <code class="docutils literal notranslate"><span class="pre">ARROW:schema</span></code> metadata key in
the Parquet file metadata.</p>
</div>
</div>
<div class="section" id="limitations">
<h4><a class="toc-backref" href="#id12">Limitations</a><a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h4>
<p>Writing or reading back FixedSizedList data with null entries is not supported.</p>
</div>
</div>
<div class="section" id="encryption">
<h3><a class="toc-backref" href="#id13">Encryption</a><a class="headerlink" href="#encryption" title="Permalink to this headline">¶</a></h3>
<p>Parquet C++ implements all features specified in the
<a class="reference external" href="https://github.com/apache/parquet-format/blob/master/Encryption.md">encryption specification</a>,
except for encryption of column index and bloom filter modules.</p>
<p>More specifically, Parquet C++ supports:</p>
<ul class="simple">
<li><p>AES_GCM_V1 and AES_GCM_CTR_V1 encryption algorithms.</p></li>
<li><p>AAD suffix for Footer, ColumnMetaData, Data Page, Dictionary Page,
Data PageHeader, Dictionary PageHeader module types. Other module types
(ColumnIndex, OffsetIndex, BloomFilter Header, BloomFilter Bitset) are not
supported.</p></li>
<li><p>EncryptionWithFooterKey and EncryptionWithColumnKey modes.</p></li>
<li><p>Encrypted Footer and Plaintext Footer modes.</p></li>
</ul>
</div>
</div>
<div class="section" id="reading-parquet-files">
<h2><a class="toc-backref" href="#id14">Reading Parquet files</a><a class="headerlink" href="#reading-parquet-files" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="api/formats.html#_CPPv4N7parquet5arrow10FileReaderE" title="parquet::arrow::FileReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">arrow::FileReader</span></code></a> class reads data for an entire
file or row group into an <a class="reference internal" href="api/table.html#_CPPv4N5arrow5TableE" title="arrow::Table"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">::arrow::Table</span></code></a>.</p>
<p>The <a class="reference internal" href="api/formats.html#_CPPv4N7parquet12StreamReaderE" title="parquet::StreamReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StreamReader</span></code></a> and <a class="reference internal" href="api/formats.html#_CPPv4N7parquet12StreamWriterE" title="parquet::StreamWriter"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StreamWriter</span></code></a> classes allow for
data to be written using a C++ input/output streams approach to
read/write fields column by column and row by row.  This approach is
offered for ease of use and type-safety.  It is of course also useful
when data must be streamed as files are read and written
incrementally.</p>
<p>Please note that the performance of the <a class="reference internal" href="api/formats.html#_CPPv4N7parquet12StreamReaderE" title="parquet::StreamReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StreamReader</span></code></a> and
<a class="reference internal" href="api/formats.html#_CPPv4N7parquet12StreamWriterE" title="parquet::StreamWriter"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StreamWriter</span></code></a> classes will not be as good due to the type
checking and the fact that column values are processed one at a time.</p>
<div class="section" id="filereader">
<h3><a class="toc-backref" href="#id15">FileReader</a><a class="headerlink" href="#filereader" title="Permalink to this headline">¶</a></h3>
<p>The Parquet <a class="reference internal" href="api/formats.html#_CPPv4N7parquet5arrow10FileReaderE" title="parquet::arrow::FileReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">arrow::FileReader</span></code></a> requires a
<a class="reference internal" href="api/io.html#_CPPv4N5arrow2io16RandomAccessFileE" title="arrow::io::RandomAccessFile"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">::arrow::io::RandomAccessFile</span></code></a> instance representing the input
file.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;arrow/parquet/arrow/reader.h&quot;</span><span class="cp"></span>

<span class="p">{</span>
   <span class="c1">// ...</span>
   <span class="n">arrow</span><span class="o">::</span><span class="n">Status</span> <span class="n">st</span><span class="p">;</span>
   <span class="n">arrow</span><span class="o">::</span><span class="n">MemoryPool</span><span class="o">*</span> <span class="n">pool</span> <span class="o">=</span> <span class="n">default_memory_pool</span><span class="p">();</span>
   <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">arrow</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">RandomAccessFile</span><span class="o">&gt;</span> <span class="n">input</span> <span class="o">=</span> <span class="p">...;</span>

   <span class="c1">// Open Parquet file reader</span>
   <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">parquet</span><span class="o">::</span><span class="n">arrow</span><span class="o">::</span><span class="n">FileReader</span><span class="o">&gt;</span> <span class="n">arrow_reader</span><span class="p">;</span>
   <span class="n">st</span> <span class="o">=</span> <span class="n">parquet</span><span class="o">::</span><span class="n">arrow</span><span class="o">::</span><span class="n">OpenFile</span><span class="p">(</span><span class="n">input</span><span class="p">,</span> <span class="n">pool</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">arrow_reader</span><span class="p">);</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">ok</span><span class="p">())</span> <span class="p">{</span>
      <span class="c1">// Handle error instantiating file reader...</span>
   <span class="p">}</span>

   <span class="c1">// Read entire file as a single Arrow table</span>
   <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">arrow</span><span class="o">::</span><span class="n">Table</span><span class="o">&gt;</span> <span class="n">table</span><span class="p">;</span>
   <span class="n">st</span> <span class="o">=</span> <span class="n">arrow_reader</span><span class="o">-&gt;</span><span class="n">ReadTable</span><span class="p">(</span><span class="o">&amp;</span><span class="n">table</span><span class="p">);</span>
   <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">st</span><span class="p">.</span><span class="n">ok</span><span class="p">())</span> <span class="p">{</span>
      <span class="c1">// Handle error reading Parquet data...</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finer-grained options are available through the
<a class="reference internal" href="api/formats.html#_CPPv4N7parquet5arrow17FileReaderBuilderE" title="parquet::arrow::FileReaderBuilder"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">arrow::FileReaderBuilder</span></code></a> helper class.</p>
</div>
<div class="section" id="streamreader">
<h3><a class="toc-backref" href="#id16">StreamReader</a><a class="headerlink" href="#streamreader" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api/formats.html#_CPPv4N7parquet12StreamReaderE" title="parquet::StreamReader"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StreamReader</span></code></a> allows for Parquet files to be read using
standard C++ input operators which ensures type-safety.</p>
<p>Please note that types must match the schema exactly i.e. if the
schema field is an unsigned 16-bit integer then you must supply a
uint16_t type.</p>
<p>Exceptions are used to signal errors.  A <a class="reference internal" href="api/support.html#_CPPv4N7parquet16ParquetExceptionE" title="parquet::ParquetException"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ParquetException</span></code></a> is
thrown in the following circumstances:</p>
<ul class="simple">
<li><p>Attempt to read field by supplying the incorrect type.</p></li>
<li><p>Attempt to read beyond end of row.</p></li>
<li><p>Attempt to read beyond end of file.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;arrow/io/file.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;parquet/stream_reader.h&quot;</span><span class="cp"></span>

<span class="p">{</span>
   <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">arrow</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">ReadableFile</span><span class="o">&gt;</span> <span class="n">infile</span><span class="p">;</span>

   <span class="n">PARQUET_ASSIGN_OR_THROW</span><span class="p">(</span>
      <span class="n">infile</span><span class="p">,</span>
      <span class="n">arrow</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">ReadableFile</span><span class="o">::</span><span class="n">Open</span><span class="p">(</span><span class="s">&quot;test.parquet&quot;</span><span class="p">));</span>

   <span class="n">parquet</span><span class="o">::</span><span class="n">StreamReader</span> <span class="n">os</span><span class="p">{</span><span class="n">parquet</span><span class="o">::</span><span class="n">ParquetFileReader</span><span class="o">::</span><span class="n">Open</span><span class="p">(</span><span class="n">infile</span><span class="p">)};</span>

   <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">article</span><span class="p">;</span>
   <span class="kt">float</span> <span class="n">price</span><span class="p">;</span>
   <span class="kt">uint32_t</span> <span class="n">quantity</span><span class="p">;</span>

   <span class="k">while</span> <span class="p">(</span> <span class="o">!</span><span class="n">os</span><span class="p">.</span><span class="n">eof</span><span class="p">()</span> <span class="p">)</span>
   <span class="p">{</span>
      <span class="n">os</span> <span class="o">&gt;&gt;</span> <span class="n">article</span> <span class="o">&gt;&gt;</span> <span class="n">price</span> <span class="o">&gt;&gt;</span> <span class="n">quantity</span> <span class="o">&gt;&gt;</span> <span class="n">parquet</span><span class="o">::</span><span class="n">EndRow</span><span class="p">;</span>
      <span class="c1">// ...</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="writing-parquet-files">
<h2><a class="toc-backref" href="#id17">Writing Parquet files</a><a class="headerlink" href="#writing-parquet-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="writetable">
<h3><a class="toc-backref" href="#id18">WriteTable</a><a class="headerlink" href="#writetable" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api/formats.html#_CPPv4N7parquet5arrow10WriteTableERKN5arrow5TableEP10MemoryPoolNSt10shared_ptrIN5arrow2io12OutputStreamEEE7int64_tNSt10shared_ptrI16WriterPropertiesEENSt10shared_ptrI21ArrowWriterPropertiesEE" title="parquet::arrow::WriteTable"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">arrow::WriteTable()</span></code></a> function writes an entire
<a class="reference internal" href="api/table.html#_CPPv4N5arrow5TableE" title="arrow::Table"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">::arrow::Table</span></code></a> to an output file.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;parquet/arrow/writer.h&quot;</span><span class="cp"></span>

<span class="p">{</span>
   <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">arrow</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">FileOutputStream</span><span class="o">&gt;</span> <span class="n">outfile</span><span class="p">;</span>
   <span class="n">PARQUET_ASSIGN_OR_THROW</span><span class="p">(</span>
      <span class="n">outfile</span><span class="p">,</span>
      <span class="n">arrow</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">FileOutputStream</span><span class="o">::</span><span class="n">Open</span><span class="p">(</span><span class="s">&quot;test.parquet&quot;</span><span class="p">));</span>

   <span class="n">PARQUET_THROW_NOT_OK</span><span class="p">(</span>
      <span class="n">parquet</span><span class="o">::</span><span class="n">arrow</span><span class="o">::</span><span class="n">WriteTable</span><span class="p">(</span><span class="n">table</span><span class="p">,</span> <span class="n">arrow</span><span class="o">::</span><span class="n">default_memory_pool</span><span class="p">(),</span> <span class="n">outfile</span><span class="p">,</span> <span class="mi">3</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="streamwriter">
<h3><a class="toc-backref" href="#id19">StreamWriter</a><a class="headerlink" href="#streamwriter" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api/formats.html#_CPPv4N7parquet12StreamWriterE" title="parquet::StreamWriter"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">StreamWriter</span></code></a> allows for Parquet files to be written using
standard C++ output operators.  This type-safe approach also ensures
that rows are written without omitting fields and allows for new row
groups to be created automatically (after certain volume of data) or
explicitly by using the <code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">EndRowGroup</span></code> stream modifier.</p>
<p>Exceptions are used to signal errors.  A <a class="reference internal" href="api/support.html#_CPPv4N7parquet16ParquetExceptionE" title="parquet::ParquetException"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">ParquetException</span></code></a> is
thrown in the following circumstances:</p>
<ul class="simple">
<li><p>Attempt to write a field using an incorrect type.</p></li>
<li><p>Attempt to write too many fields in a row.</p></li>
<li><p>Attempt to skip a required field.</p></li>
</ul>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;arrow/io/file.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;parquet/stream_writer.h&quot;</span><span class="cp"></span>

<span class="p">{</span>
   <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">arrow</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">FileOutputStream</span><span class="o">&gt;</span> <span class="n">outfile</span><span class="p">;</span>

   <span class="n">PARQUET_ASSIGN_OR_THROW</span><span class="p">(</span>
      <span class="n">outfile</span><span class="p">,</span>
      <span class="n">arrow</span><span class="o">::</span><span class="n">io</span><span class="o">::</span><span class="n">FileOutputStream</span><span class="o">::</span><span class="n">Open</span><span class="p">(</span><span class="s">&quot;test.parquet&quot;</span><span class="p">));</span>

   <span class="n">parquet</span><span class="o">::</span><span class="n">WriterProperties</span><span class="o">::</span><span class="n">Builder</span> <span class="n">builder</span><span class="p">;</span>
   <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">parquet</span><span class="o">::</span><span class="n">schema</span><span class="o">::</span><span class="n">GroupNode</span><span class="o">&gt;</span> <span class="n">schema</span><span class="p">;</span>

   <span class="c1">// Set up builder with required compression type etc.</span>
   <span class="c1">// Define schema.</span>
   <span class="c1">// ...</span>

   <span class="n">parquet</span><span class="o">::</span><span class="n">StreamWriter</span> <span class="n">os</span><span class="p">{</span>
      <span class="n">parquet</span><span class="o">::</span><span class="n">ParquetFileWriter</span><span class="o">::</span><span class="n">Open</span><span class="p">(</span><span class="n">outfile</span><span class="p">,</span> <span class="n">schema</span><span class="p">,</span> <span class="n">builder</span><span class="p">.</span><span class="n">build</span><span class="p">())};</span>

   <span class="c1">// Loop over some data structure which provides the required</span>
   <span class="c1">// fields to be written and write each row.</span>
   <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">a</span> <span class="p">:</span> <span class="n">getArticles</span><span class="p">())</span>
   <span class="p">{</span>
      <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">name</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">price</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">quantity</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">parquet</span><span class="o">::</span><span class="n">EndRow</span><span class="p">;</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="ipc.html" title="previous page">Reading and writing the Arrow IPC format</a>
    <a class='right-next' id="next-link" href="csv.html" title="next page">Reading CSV files</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.90951cbc93101d5860c0.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2016-2019 Apache Software Foundation.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>